{"version":3,"sources":["utils/constants.ts","utils/searchGame.ts","utils/socket.ts","pages/Game/index.tsx","utils/errorToast.ts","pages/Home/index.tsx","pages/Join/index.tsx","index.tsx"],"names":["API_URL","searchGame","gameId","a","fetch","method","headers","body","JSON","stringify","game_id","res","json","data","result","gameExists","online","socket","io","withCredentials","Square","onClick","value","className","Board","mode","useState","squares","setSquares","xIsNext","setXIsNext","gameStatus","setGameStatus","enableRestart","setEnableRestart","playingAs","history","useHistory","squaresRef","useRef","useEffect","current","showToast","text","toast","position","hideProgressBar","draggable","autoClose","pauseOnHover","closeOnClick","transition","Slide","gameResult","calculateWinner","winner","gameTied","getBoard","on","updateBoard","off","updatedSquares","player","next","board","replace","pathname","renderSquare","i","tempSquares","slice","emit","handleClick","boardData","lines","length","b","c","includes","Game","setOnline","location","useLocation","connected","state","checkIfGameExists","toString","undefined","style","height","window","innerHeight","to","target","href","origin","rel","errorToast","type","Home","setGameId","setGameExists","gameIdToJoin","setGameIdToJoin","bothJoined","setBothJoined","joinGameInput","setJoinGameInput","creatingGame","setCreatingGame","joiningGame","setJoiningGame","createGame","console","error","joinGame","push","link","navigator","clipboard","writeText","bodyClassName","copyLink","share","title","url","err","shareLink","name","id","placeholder","onChange","e","Date","getFullYear","Join","params","useParams","Main","exact","path","component","limit","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a9ba7b70.chunk.js","sourcesContent":["export const API_URL =\n\tprocess.env.NODE_ENV === \"development\"\n\t\t? process.env.REACT_APP_API_URL\n\t\t: \"/\";\n","import { API_URL } from \"./constants\";\nimport { GameExistsResponse, SearchResponse } from \"./types\";\n\nexport const searchGame = async (\n\tgameId: string\n): Promise<GameExistsResponse> => {\n\tconst res = await fetch(`${API_URL}api/search/game`, {\n\t\tmethod: \"POST\",\n\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\tbody: JSON.stringify({ game_id: gameId }),\n\t});\n\tconst data: SearchResponse = await res.json();\n\n\tif (data.result === \"fail\")\n\t\treturn {\n\t\t\tgameExists: false,\n\t\t\tonline: 0,\n\t\t};\n\tif (data.result === \"success\")\n\t\treturn {\n\t\t\tgameExists: true,\n\t\t\tonline: data.online,\n\t\t};\n\treturn {\n\t\tgameExists: false,\n\t\tonline: 0,\n\t};\n};\n","import { io } from \"socket.io-client\";\n\nconst socket_url =\n\tprocess.env.NODE_ENV === \"development\"\n\t\t? process.env.REACT_APP_API_URL || \"\"\n\t\t: \"/\";\n\nconst socket = io(`${socket_url}game`, {\n\twithCredentials: true,\n});\n\nexport default socket;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { Link, useLocation, useHistory } from \"react-router-dom\";\nimport { API_URL } from \"../../utils/constants\";\nimport { searchGame } from \"../../utils/searchGame\";\nimport socket from \"../../utils/socket\";\nimport \"./game.css\";\nimport { toast, Slide } from \"react-toastify\";\n\ntype SquareProps = {\n\tonClick: React.MouseEventHandler<HTMLButtonElement> | undefined;\n\tvalue: string | null;\n};\n\nconst Square: React.FC<SquareProps> = ({ onClick, value }) => (\n\t<button className=\"square\" onClick={onClick}>\n\t\t{value}\n\t</button>\n);\n\ntype BoardProps = {\n\tmode: \"CREATE\" | \"JOIN\";\n\tgameId: number;\n};\n\ntype FetchGameResponse = {\n\tresult: \"fail\" | \"success\";\n\tboard: Array<string | null>;\n\tnext: \"X\" | \"O\";\n};\n\ntype UpdateBoardResponse = {\n\tposition: number;\n\tnext: \"X\" | \"O\";\n\tplayer: any;\n};\nconst Board: React.FC<BoardProps> = ({ mode, gameId }) => {\n\tconst [squares, setSquares] = useState<Array<string | null>>([]);\n\tconst [xIsNext, setXIsNext] = useState(true);\n\tconst [gameStatus, setGameStatus] = useState<string | null>(null);\n\tconst [enableRestart, setEnableRestart] = useState(false);\n\n\tconst playingAs = mode === \"CREATE\" ? \"X\" : \"O\";\n\n\tconst history = useHistory();\n\n\tconst squaresRef = useRef(squares);\n\n\tuseEffect(() => {\n\t\tsquaresRef.current = squares;\n\t});\n\n\tconst showToast = (text: string) =>\n\t\ttoast(text, {\n\t\t\tposition: \"bottom-center\",\n\t\t\thideProgressBar: true,\n\t\t\tdraggable: false,\n\t\t\tautoClose: 5000,\n\t\t\tpauseOnHover: false,\n\t\t\tcloseOnClick: true,\n\t\t\ttransition: Slide,\n\t\t});\n\tuseEffect(() => {\n\t\tconst gameResult = calculateWinner(squares);\n\t\tif (gameResult) {\n\t\t\tif (gameResult.winner && !gameResult.gameTied) {\n\t\t\t\tsetGameStatus(`Winner : ${gameResult.winner}`);\n\t\t\t}\n\t\t\tif (gameResult.gameTied && !gameResult.winner) {\n\t\t\t\tsetGameStatus(\"Game Tied\");\n\t\t\t}\n\t\t} else {\n\t\t\tsetGameStatus(\n\t\t\t\t`Next Player : ${\n\t\t\t\t\txIsNext\n\t\t\t\t\t\t? mode === \"CREATE\"\n\t\t\t\t\t\t\t? \"You\"\n\t\t\t\t\t\t\t: \"X\"\n\t\t\t\t\t\t: mode === \"JOIN\"\n\t\t\t\t\t\t? \"You\"\n\t\t\t\t\t\t: \"O\"\n\t\t\t\t}`\n\t\t\t);\n\t\t}\n\t}, [squares]);\n\n\tuseEffect(() => {\n\t\tgetBoard();\n\t\tsocket.on(\"moved\", updateBoard);\n\t\tsocket.on(\"restarted\", () => {\n\t\t\tgetBoard();\n\t\t\tshowToast(\"Game Restarted !\");\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.off(\"moved\", updateBoard);\n\t\t};\n\t}, []);\n\n\tconst updateBoard = (data: UpdateBoardResponse) => {\n\t\tconst updatedSquares = [...squaresRef.current];\n\t\tupdatedSquares[data.position] = data.player;\n\t\tsetSquares(updatedSquares);\n\t\tsetXIsNext(data.next === \"X\");\n\t\tconst gameResult = calculateWinner(updatedSquares);\n\t\tif (gameResult) setEnableRestart(true);\n\t\tif (gameResult?.gameTied) {\n\t\t\tshowToast(\"Game Tied\");\n\t\t}\n\n\t\tif (gameResult?.winner) {\n\t\t\tif (gameResult.winner === playingAs) {\n\t\t\t\tshowToast(\"You won ðŸŽ‰ï¸\");\n\t\t\t} else {\n\t\t\t\tshowToast(\"You lost\");\n\t\t\t}\n\t\t}\n\t};\n\n\tconst getBoard = async () => {\n\t\tsetEnableRestart(false);\n\t\tconst res = await fetch(`${API_URL}api/fetch/game/${gameId}`);\n\t\tconst data: FetchGameResponse = await res.json();\n\t\tif (data.result === \"success\") {\n\t\t\tsetSquares(data.board);\n\t\t\tsetXIsNext(data.next === \"X\");\n\t\t\tconst status = calculateWinner(data.board);\n\t\t\tif (status) setEnableRestart(true);\n\t\t} else if (data.result === \"fail\") {\n\t\t\thistory.replace({ pathname: \"/\" });\n\t\t}\n\t};\n\n\tconst handleClick = (i: number) => {\n\t\tconst tempSquares = squares.slice();\n\t\tconst gameResult = calculateWinner(squares);\n\n\t\tif (gameResult || squares[i]) {\n\t\t\tif (gameResult?.gameTied) {\n\t\t\t\tshowToast(\"Game Tied\");\n\t\t\t} else if (gameResult?.winner) {\n\t\t\t\tif (gameResult.winner === playingAs) {\n\t\t\t\t\tshowToast(\"You won ðŸŽ‰ï¸\");\n\t\t\t\t} else {\n\t\t\t\t\tshowToast(\"You lost\");\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (mode === \"CREATE\" && xIsNext) {\n\t\t\ttempSquares[i] = \"X\";\n\t\t\tsetSquares(tempSquares);\n\t\t\tsetXIsNext(false);\n\t\t\tsocket.emit(\"move\", {\n\t\t\t\tplayer: tempSquares[i],\n\t\t\t\tposition: i,\n\t\t\t\tgame_id: gameId,\n\t\t\t});\n\t\t} else if (mode === \"JOIN\" && !xIsNext) {\n\t\t\ttempSquares[i] = \"O\";\n\t\t\tsetSquares(tempSquares);\n\t\t\tsetXIsNext(true);\n\t\t\tsocket.emit(\"move\", {\n\t\t\t\tplayer: tempSquares[i],\n\t\t\t\tposition: i,\n\t\t\t\tgame_id: gameId,\n\t\t\t});\n\t\t}\n\t};\n\n\tconst renderSquare = (i: number) => (\n\t\t<Square value={squares[i]} onClick={() => handleClick(i)} />\n\t);\n\n\tconst restartGame = () => socket.emit(\"restartGame\", { game_id: gameId });\n\n\treturn (\n\t\t<div className=\"flex flex-col space-y-4 items-center\">\n\t\t\t<p className=\"text-gray-500 text-sm md:text-base\">{gameStatus}</p>\n\n\t\t\t<div>\n\t\t\t\t<div className=\"board-row\">\n\t\t\t\t\t{renderSquare(0)}\n\t\t\t\t\t{renderSquare(1)}\n\t\t\t\t\t{renderSquare(2)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"board-row\">\n\t\t\t\t\t{renderSquare(3)}\n\t\t\t\t\t{renderSquare(4)}\n\t\t\t\t\t{renderSquare(5)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"board-row\">\n\t\t\t\t\t{renderSquare(6)}\n\t\t\t\t\t{renderSquare(7)}\n\t\t\t\t\t{renderSquare(8)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\t\tPlaying as : <b>{playingAs}</b>\n\t\t\t</p>\n\t\t\t{enableRestart && <button onClick={restartGame}>Restart</button>}\n\t\t</div>\n\t);\n};\n\nfunction calculateWinner(boardData: Array<string | null>) {\n\tconst lines = [\n\t\t[0, 1, 2],\n\t\t[3, 4, 5],\n\t\t[6, 7, 8],\n\t\t[0, 3, 6],\n\t\t[1, 4, 7],\n\t\t[2, 5, 8],\n\t\t[0, 4, 8],\n\t\t[2, 4, 6],\n\t];\n\tfor (let i = 0; i < lines.length; i++) {\n\t\tconst [a, b, c] = lines[i];\n\t\tif (\n\t\t\tboardData[a] &&\n\t\t\tboardData[a] === boardData[b] &&\n\t\t\tboardData[a] === boardData[c]\n\t\t) {\n\t\t\treturn {\n\t\t\t\twinner: boardData[a],\n\t\t\t\tgameTied: false,\n\t\t\t};\n\t\t}\n\t}\n\tif (boardData.includes(null) === false) {\n\t\treturn {\n\t\t\twinner: null,\n\t\t\tgameTied: true,\n\t\t};\n\t}\n\treturn null;\n}\n\ntype LocationStateType = {\n\tgameId: number;\n\tmode: \"CREATE\" | \"JOIN\";\n};\n\ntype SocketConnectedData = {\n\tgame_id: string;\n\tonline: string[];\n};\n\nconst Game: React.FC<any> = () => {\n\tconst [online, setOnline] = useState(0);\n\n\tconst location = useLocation();\n\tconst history = useHistory();\n\n\tconst connected = (data: SocketConnectedData) =>\n\t\tsetOnline(data.online.length);\n\n\tconst gameId = (location.state as LocationStateType)?.gameId;\n\tconst mode = (location.state as LocationStateType)?.mode || \"JOIN\";\n\n\tconst checkIfGameExists = async () => {\n\t\tconst gameExists = await searchGame(gameId.toString());\n\t\tif (!gameExists) {\n\t\t\thistory.replace({\n\t\t\t\tpathname: \"/\",\n\t\t\t});\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (location.state !== undefined && gameId) checkIfGameExists();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (location.state !== undefined && gameId)\n\t\t\tsocket.emit(\"join\", {\n\t\t\t\tgame_id: gameId,\n\t\t\t\tplayer: mode === \"CREATE\" ? \"X\" : \"O\",\n\t\t\t});\n\n\t\tsocket.on(\"connected\", connected);\n\t\tsocket.on(\"disconnected\", connected);\n\t\treturn () => {\n\t\t\tsocket.emit(\"leave\", {\n\t\t\t\tgame_id: gameId,\n\t\t\t\tplayer: mode === \"CREATE\" ? \"X\" : \"O\",\n\t\t\t});\n\t\t\tsocket.off(\"connected\");\n\t\t};\n\t}, []);\n\n\tif (!location.state || !gameId)\n\t\thistory.replace({\n\t\t\tpathname: \"/\",\n\t\t});\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"flex flex-col items-center px-4\"\n\t\t\tstyle={{\n\t\t\t\theight: window.innerHeight,\n\t\t\t}}\n\t\t>\n\t\t\t<Link to=\"/\" className=\"underline text-gray-500\">\n\t\t\t\tGo Home\n\t\t\t</Link>\n\n\t\t\t<p className=\"self-end md:text-lg\">Joined: {online}</p>\n\n\t\t\t<div className=\"flex-grow-1 h-full justify-center flex flex-col\">\n\t\t\t\t<Board gameId={gameId} mode={mode} />\n\t\t\t</div>\n\n\t\t\t<a\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\thref={window.location.origin + \"/join/\" + gameId}\n\t\t\t\tclassName=\"my-4 text-gray-500 text-sm md:text-base\"\n\t\t\t\trel=\"noreferrer\"\n\t\t\t>\n\t\t\t\tGame: {gameId}\n\t\t\t</a>\n\t\t</div>\n\t);\n};\n\nexport default Game;\n","import { toast, Slide } from \"react-toastify\";\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const errorToast = (text = \"An error occured\") =>\n\ttoast(text, {\n\t\tposition: \"bottom-center\",\n\t\thideProgressBar: true,\n\t\tdraggable: false,\n\t\tautoClose: 5000,\n\t\tpauseOnHover: false,\n\t\tcloseOnClick: true,\n\t\ttransition: Slide,\n\t\ttype: \"error\",\n\t});\n","import React, { useEffect, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { toast, Slide } from \"react-toastify\";\n\nimport { API_URL } from \"../../utils/constants\";\nimport { errorToast } from \"../../utils/errorToast\";\nimport { searchGame } from \"../../utils/searchGame\";\n\nconst Home: React.FC<any> = () => {\n\tconst [gameId, setGameId] = useState(null);\n\tconst [gameExists, setGameExists] = useState(true);\n\tconst [gameIdToJoin, setGameIdToJoin] = useState<string | null>(null);\n\tconst [bothJoined, setBothJoined] = useState(false);\n\tconst [joinGameInput, setJoinGameInput] = useState(false);\n\tconst [creatingGame, setCreatingGame] = useState(false);\n\n\tconst [joiningGame, setJoiningGame] = useState(false);\n\n\tconst history = useHistory();\n\n\tconst createGame = async () => {\n\t\tsetJoinGameInput(false);\n\t\tsetCreatingGame(true);\n\t\ttry {\n\t\t\tconst res = await fetch(`${API_URL}api/create/game`);\n\t\t\tconst data = await res.json();\n\t\t\tif (data.result === \"success\") {\n\t\t\t\tsetGameId(data.game_id);\n\t\t\t\tsetCreatingGame(false);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t\tsetCreatingGame(false);\n\t\t\terrorToast();\n\t\t}\n\t};\n\n\tconst toggleJoinGameInput = () => setJoinGameInput(!joinGameInput);\n\n\tconst startGame = () =>\n\t\thistory.push({\n\t\t\tpathname: \"/game\",\n\t\t\tstate: {\n\t\t\t\tgameId,\n\t\t\t\tmode: \"CREATE\",\n\t\t\t},\n\t\t});\n\n\tconst joinGame = async () => {\n\t\tif (!gameIdToJoin) return null;\n\t\ttry {\n\t\t\tsetJoiningGame(true);\n\n\t\t\tconst gameExists = await searchGame(gameIdToJoin);\n\n\t\t\tif (gameExists) {\n\t\t\t\tsetGameExists(true);\n\t\t\t\tsetJoiningGame(false);\n\t\t\t\tif (gameExists.online !== 2) {\n\t\t\t\t\thistory.push({\n\t\t\t\t\t\tpathname: \"/game\",\n\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\tgameId: gameIdToJoin,\n\t\t\t\t\t\t\tmode: \"JOIN\",\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsetBothJoined(true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetBothJoined(false);\n\t\t\t\tsetGameExists(false);\n\t\t\t\tsetJoiningGame(false);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t\terrorToast();\n\t\t\tsetJoiningGame(false);\n\t\t}\n\t};\n\n\tconst copyLink = (link: string) => {\n\t\tnavigator.clipboard?.writeText(link);\n\t\ttoast(\"Copied\", {\n\t\t\tposition: \"bottom-center\",\n\t\t\thideProgressBar: true,\n\t\t\tdraggable: false,\n\t\t\tautoClose: 5000,\n\t\t\tpauseOnHover: false,\n\t\t\tcloseOnClick: true,\n\t\t\ttransition: Slide,\n\t\t\tbodyClassName: \"flex items-center flex-row  text-black rounded-lg\",\n\t\t});\n\t};\n\n\n\n\tconst shareLink = (link:string) => {\n\t\tif (navigator.share) {\n\t\t\ttry {\n\t\t\t\tnavigator.share({\n\t\t\t\t\ttitle:\"Tic Tac Toe Online\",\n\t\t\t\t\ttext: \"You're invited to play Tic Tac Toe Online\",\n\t\t\t\t\turl: link\n\t\t\t\t})\t\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err)\n\t\t\t}\n\t\t\t\n\t\t} else {\n\t\t\tconsole.error(\"Sharing not supported\")\n\t\t}\n\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"flex flex-col w-screen  items-center justify-center px-4\"\n\t\t\tstyle={{\n\t\t\t\theight: window.innerHeight,\n\t\t\t}}\n\t\t>\n\t\t\t<div className=\"flex flex-col space-y-4 h-full items-center justify-center\">\n\t\t\t\t<span className=\"flex\">\n\t\t\t\t\t<p className=\"text-4xl font-bold mt-2\">Tic-Tac-Toe</p>\n\t\t\t\t\t<p className=\"font-light text-xl \">Online</p>\n\t\t\t\t</span>\n\t\t\t\t<h3 className=\"text-xl text-center pt-4\">Get Started</h3>\n\t\t\t\t<div className=\"flex space-x-4 flex-wrap\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"bg-black text-white px-4 py-3 hover:bg-white hover:text-black border border-black transition\"\n\t\t\t\t\t\tonClick={createGame}\n\t\t\t\t\t>\n\t\t\t\t\t\t{creatingGame ? \"Creating...\" : \"Create a new game\"}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={toggleJoinGameInput}\n\t\t\t\t\t\tclassName=\"border border-black bg-transparent text-black hover:bg-black hover:text-white px-4 py-3 transition\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{joiningGame ? \"Joining...\" : \"Join a game\"}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t{gameId && (\n\t\t\t\t\t<div className=\"flex items-center flex-col text-center py-4 px-4\">\n\t\t\t\t\t\t<h4 className=\"text-lg font-semibold\">\n\t\t\t\t\t\t\tGame Created.\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\tGame ID : {gameId}\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t<p className=\"text-sm md:text-base\">\n\t\t\t\t\t\t\tAsk the other player to enter this ID while Joining\n\t\t\t\t\t\t\tthe game. Or use the link below (Tap to copy) :\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\tcopyLink(window.location + \"join/\" + gameId)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tclassName=\"my-4 text-gray-700\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{window.location + \"join/\" + gameId}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{navigator.share !== undefined && (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"text-lg font-medium \"\n\t\t\t\t\t\tonClick={() => shareLink(window.location + \"join/\" + gameId)}>Share</button>)}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"bg-black text-white transition hover:bg-white hover:text-black  w-full md:w-64 py-3 my-4 border border-black\"\n\t\t\t\t\t\t\tonClick={startGame}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tStart Game\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{joinGameInput && (\n\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t<div className=\"flex flex-row space-x-4 justify-center\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tname=\"gameID\"\n\t\t\t\t\t\t\t\tid=\"gameID\"\n\t\t\t\t\t\t\t\tclassName=\"bg-gray-100 px-4 py-3 rounded-md w-48\"\n\t\t\t\t\t\t\t\tplaceholder=\"Game ID\"\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetGameIdToJoin(e.target.value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"text-white bg-black py-3 px-6\"\n\t\t\t\t\t\t\t\tonClick={joinGame}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tJoin\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{bothJoined && (\n\t\t\t\t\t\t\t\t<h3 className=\"my-4 text-red-700\">\n\t\t\t\t\t\t\t\t\tBoth players have already joined.\n\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{!gameExists && (\n\t\t\t\t\t\t\t\t<h3 className=\"my-4 text-red-700\">\n\t\t\t\t\t\t\t\t\tGame doesn&apos;t exist. Create one to start\n\t\t\t\t\t\t\t\t\tplaying.\n\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className=\" mb-4 text-center flex flex-col text-sm md:text-base\">\n\t\t\t\t<a\n\t\t\t\t\thref=\"https://github.com/NiketanG/tic-tac-toe-online\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\tclassName=\"underline text-gray-600\"\n\t\t\t\t>\n\t\t\t\t\tLearn More\n\t\t\t\t</a>\n\t\t\t\t<p>\n\t\t\t\t\tDesigned and Developed by{\" \"}\n\t\t\t\t\t<a href=\"http://bit.ly/nikketan\">Niketan Gulekar</a> &copy;\n\t\t\t\t\t{new Date().getFullYear()}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Home;\n","import React, { useEffect } from \"react\";\nimport { useHistory, useParams } from \"react-router\";\nimport { API_URL } from \"../../utils/constants\";\n\nimport { errorToast } from \"../../utils/errorToast\";\ntype Params = {\n\tgameId: string;\n};\n\nconst Join: React.FC<any> = () => {\n\tconst params = useParams<Params>();\n\tconst history = useHistory();\n\n\tconst searchGame = async () => {\n\t\tconst res = await fetch(`${API_URL}api/search/game`, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\tbody: JSON.stringify({ game_id: params.gameId }),\n\t\t});\n\n\t\tconst data = await res.json();\n\t\tif (data.result === \"fail\") \n\t\t\terrorToast(\"Game does'nt exist\");\n\t\t\thistory.replace({\n\t\t\t\tpathname: \"/\",\n\t\t\t});\n\t\t\n\n\t\tif (data.result === \"success\") \n\t\t\thistory.replace({\n\t\t\t\tpathname: \"/game\",\n\t\t\t\tstate: {\n\t\t\t\t\tgameId: params.gameId,\n\t\t\t\t\tmode: \"JOIN\",\n\t\t\t\t},\n\t\t\t});\n\t\t\n\t};\n\tuseEffect(() => {\n\t\tsearchGame();\n\t}, []);\n\n\treturn (\n\t\t<div className=\"flex flex-col items-center justify-center h-screen \">\n\t\t\t<p className=\"text-2xl md:text-4xl my-2\">Joining Game</p>\n\t\t\t<p className=\"my-8\">Game ID: {params.gameId}</p>\n\t\t</div>\n\t);\n};\n\nexport default Join;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Game from \"./pages/Game\";\nimport Home from \"./pages/Home\";\nimport Join from \"./pages/Join\";\nimport \"./styles/index.css\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nconst Main = () => (\n\t<Router>\n\t\t<Switch>\n\t\t\t<Route exact path=\"/\" component={Home} />\n\t\t\t<Route path=\"/game\" component={Game} />\n\t\t\t<Route path=\"/join/:gameId\" component={Join} />\n\t\t</Switch>\n\t\t<ToastContainer limit={3} />\n\t</Router>\n);\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Main />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n"],"sourceRoot":""}